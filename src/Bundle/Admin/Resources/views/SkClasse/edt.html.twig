{% extends 'admin/admin.html.twig' %}

{% block title %}{{ parent() }} Tableau de bord {% endblock %}

{% set menu_matiere = true %}

{% block body %}
    {% for flashMessage in app.session.flashbag.get('success') %}
        <div class="callout callout-success">
            {{ flashMessage }}
        </div>
    {% endfor %}
    {% for flashMessage in app.session.flashbag.get('error') %}
        <div class="callout callout-danger">
            {{ flashMessage }}
        </div>
    {% endfor %}
    <div class="card shadow mb-4">
        <div class="p-2">
            <div id='calendar'></div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/fullcalendar.min.js') }}"></script>
    <script>
        $(function() {
            $('#calendar').fullCalendar({
                themeSystem: 'bootstrap4',
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay,listMonth'
                },
                weekNumbers: true,
                eventLimit: true, // allow "more" link when too many events
                events: 'https://fullcalendar.io/demo-events.json',
                editable: true,
                eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {

                    alert(
                        event.title + " was moved " +
                        dayDelta + " days and " +
                        minuteDelta + " minutes."
                    );

                    if (allDay) {
                        alert("Event is now all-day");
                    }else{
                        alert("Event has a time-of-day");
                    }

                    if (!confirm("Are you sure about this change?")) {
                        revertFunc();
                    }

                }
            });
        });
    </script>
{% endblock %}